{% extends 'student_crediting/base.html' %}

{% block content %}
  <div class="w3-container w3-margin-left">
    <h1>Statistics Details</h1>
    <h3>Average Credits assigned per Sheet and Exercise</h3>

{% if false %}
  {% for sheet in rsheets %}
    <p> <h2> Sheet No{{sheet.number}} </h2>  </p>
    <p>
    {% for eg in sheet.exgroups %}
      <div class="mybold"> ExGroup{{eg.number}} </div>
      {% for ex in eg.exercises %}
      <div style="text-indent:2%"> ExerciseNo {{ex.number}} (Avg: {{ex.avg|floatformat:-2}}, StdDev: {{ex.stddev|floatformat:-2}}, Sum: {{ex.csum|floatformat:-2}}, Errp: {{ex.errp|floatformat:-2}}, Errn: {{ex.errn|floatformat:-2}})</div>
      {% endfor %}
    {% endfor %}
    </p>
  {% endfor %}
{% endif %}


  <script src="https://code.highcharts.com/highcharts.js"></script>
  <script src="https://code.highcharts.com/highcharts-more.js"></script>
  <script src="https://code.highcharts.com/modules/exporting.js"></script>
  <script src="https://code.highcharts.com/modules/export-data.js"></script>

{% for sheet in rsheets %}
  <div id="sheet{{sheet.number}}"></div>
  <script>
      Highcharts.chart('sheet{{sheet.number}}', {
        chart: {
            type: 'columnrange',
            //inverted: true
        },
		title: {
            text: 'Sheet No{{sheet.number}}'
		},
        credits: {
            enabled: false
        },
        xAxis: {
            categories: [
                {% for ex in sheet.exercises %}
                  'Ex {{ex.number}}', 
                {% endfor %}
                  ]
        },
		yAxis: {
			title: { text: 'Average Credits' },
		},
		series: [
            {% for eg in sheet.exgroups %}
                {
                name: 'G{{ eg.number}} ({{ eg.tutor }})',
                data: [
                {% for ex in eg.exercises %}
                   {% if ex.errn and ex.errp %}
                     //[{{ex.errn|floatformat:-2}}, {{ex.errp|floatformat:-2}}],
                     [{{ex.avgn|floatformat:-2}}, {{ex.avgp|floatformat:-2}}],
                   {% else %}
                     [ , ],
                   {% endif %}
                {% endfor %}
                     ],
                },
            {% endfor %}
        ],
	});
  </script>
{% endfor %}

{% endblock %}

